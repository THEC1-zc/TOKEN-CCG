# Project Log

Version: V0.6.7
Last updated: 2026-02-08

## 2026-02-03
- Added `docs/handoff.md` and `docs/decisions.md` for cross-agent continuity. (V1.0.1)
- Added version counters to `docs/farcaster llms.txt.txt` and `docs/base llms.txt`. (V0.1.1)
- Installed curated skills: `vercel-deploy`, `develop-web-game`, `security-best-practices`, `playwright`, `screenshot`.
- Added `coding rules.md` with session, versioning, logging, and compliance rules. (V1.0.0)
- Added `docs/workflow.md` with Mac+mobile collaboration rules and versioning/logging requirements. (V1.0.0)
- Added branching, commit, and testing rules to `coding rules.md`. (V1.1.0)
- Added 30-minute checkpoint rule for desktop/mobile re-checks in `coding rules.md`. (V1.2.0)
- Updated Base house icon color to blue on home page and added version marker. (index.html V1.0.1)
- Updated JollyDraw auto button to select + confirm, and bumped game version. (game.html V1.4.1)
- Updated editing workflow rule for desktop vs mobile output behavior. (`coding rules.md` V1.3.0)
- Added wallet login dropdown UI (Farcaster/Base/Wallet) to all main pages with shared assets. (index.html V1.1.0, card-minter.html V1.8.0, deck-minter.html V1.3.0, collection.html V1.1.0, deck-builder.html V1.2.0, game.html V1.5.0, assets/wallet-ui.css V1.0.0, assets/wallet-ui.js V1.0.1)
- Added main icon background to all pages except the game board. (index.html V1.2.0, card-minter.html V1.9.0, deck-minter.html V1.4.0, collection.html V1.2.0, deck-builder.html V1.3.0, generate-cardback.html V1.0.1)
- Switched main icon to centered overlay image while keeping original background colors. (index.html V1.2.1, card-minter.html V1.9.1, deck-minter.html V1.4.1, collection.html V1.2.1, deck-builder.html V1.3.1, generate-cardback.html V1.0.2)
- Added global header (logo, breadcrumb, quick actions, status, wallet) to all pages and shared header styles. (assets/header.css V1.0.0, assets/wallet-ui.css V1.1.0, assets/wallet-ui.js V1.1.0, index.html V1.3.0, card-minter.html V2.0.0, deck-minter.html V1.5.0, collection.html V1.3.0, deck-builder.html V1.4.0, game.html V1.6.0, generate-cardback.html V1.1.0)
- Upgraded TOKEN branding to green-red gradient and applied house color rules (Bitcoin orange, Ethereum silver, Base blue, Tysm yellow-blue gradient). (assets/header.css V1.1.0, index.html V1.3.1, card-minter.html V2.0.1, deck-minter.html V1.5.1, collection.html V1.3.1, deck-builder.html V1.4.1, game.html V1.6.1, generate-cardback.html V1.1.1)
- Fixed game cardback path and applied house color gradients consistently, plus added faction quick-load in deck builder. (game.html V1.6.2, deck-builder.html V1.5.0, deck-minter.html V1.5.2, collection.html V1.3.2, index.html V1.3.2)
- Switched TOKEN wordmark to `assets/token_icon.png` and removed Tysm icon background. (assets/header.css V1.2.0, index.html V1.3.3, card-minter.html V2.0.2, deck-minter.html V1.5.3, collection.html V1.3.3, deck-builder.html V1.5.1, game.html V1.6.3, generate-cardback.html V1.1.2)
- Increased TOKEN wordmark sizes for header and hero usage. (assets/header.css V1.3.0)
- Greatly increased TOKEN wordmark size across pages and added responsive sizes for mobile. (assets/header.css V1.4.0)
- Quadrupled hero wordmark size and doubled header wordmark size with responsive scaling. (assets/header.css V1.5.0)
- Centered oversized wordmark without affecting alignment and removed joystick icons. (assets/header.css V1.6.0, index.html V1.3.5, game.html V1.6.4, docs/roadmap.md, docs/ROADMAP_v0.2.0.md, docs/ARCHITECTURE_v1.0.0.md)
- Updated `docs/SYNC.md` with current versions, file structure, and 2026-02-04 changelog. (SYNC.md V1.1.0)
- Added Supabase integration guide at `supabase/BACKEND_INTEGRATION.md`, guest-user helper in `supabase-client.js`, and wired Supabase into key pages. (BACKEND_INTEGRATION.md V1.0.0, supabase-client.js V1.0.1, index.html V1.4.0, card-minter.html V2.1.0, deck-minter.html V1.6.0, deck-builder.html V1.6.0, collection.html V1.5.0, game.html V1.7.0)
- Set Supabase anon key in `supabase-client.js`. (supabase-client.js V1.0.2)
- Updated Supabase anon key to JWT value for production use. (supabase-client.js V1.0.3)

## 2026-02-04
- Replaced header TOKEN image with gradient text branding and moved token_icon usage to hero/back/toast only. (assets/header.css V1.7.2, index.html V1.4.1, card-minter.html V2.1.1, deck-minter.html V1.6.1, deck-builder.html V1.6.1, collection.html V1.5.1, game.html V1.7.2, generate-cardback.html V1.1.3)
- Switched game TOKEN toast to use only the hero token icon (no text). (game.html V1.7.3)
- Updated roadmaps with Supabase data-layer phase, priorities, and current file versions. (docs/roadmap.md V0.2.1, docs/ROADMAP_v0.2.0.md V0.2.1)
- Added admin panel plan and access rules. (docs/admin.md V1.0.0)
- Added admin dashboard page and admin data helpers, plus wallet UI export hooks. (admin.html V1.0.0, supabase/supabase-client.js V1.0.4, assets/wallet-ui.js V1.1.1, docs/admin.md V1.0.1)
- Added repository URL to decisions log. (docs/decisions.md V1.0.2)
- Added Admin link to header nav across pages. (index.html V1.4.2, card-minter.html V2.1.2, deck-minter.html V1.6.2, deck-builder.html V1.6.2, collection.html V1.5.2, game.html V1.7.4, generate-cardback.html V1.1.4)
- Added owner-only Admin link visibility and Admin badge in header. (assets/header.css V1.7.3, assets/admin-link.js V1.0.0, assets/wallet-ui.js V1.1.2, admin.html V1.0.1, index.html V1.4.3, card-minter.html V2.1.3, deck-minter.html V1.6.3, deck-builder.html V1.6.3, collection.html V1.5.3, game.html V1.7.5, generate-cardback.html V1.1.5)
- Saved official compliance docs index and updated decisions/admin login behavior. (docs/compliance/README.md V1.0.0, docs/decisions.md V1.0.3, docs/admin.md V1.0.2)
- Split wallet login actions (Farcaster/Base/Wallet/Logout) and added generic avatar fallback. (assets/wallet-ui.js V1.2.0)
- Set connected wallet label to green for clarity. (assets/wallet-ui.css V1.1.1, assets/wallet-ui.js V1.2.1)
- Fixed duplicate TokenDB load errors and avatar assignment in wallet UI. (supabase/supabase-client.js V1.0.5, assets/wallet-ui.js V1.2.2)
- Hardened wallet UI labels and Farcaster login guard for non-MiniApp contexts. (assets/wallet-ui.js V1.2.3)
- Added safe string handling for wallet labels to prevent object conversion errors. (assets/wallet-ui.js V1.2.4)
- Avoided object truthiness coercion in wallet label checks. (assets/wallet-ui.js V1.2.5)
- Added local-only guest user fallback to bypass Supabase users 401 until policies are set. (supabase/supabase-client.js V1.0.6)
- Improved browser wallet provider selection and error messaging. (assets/wallet-ui.js V1.2.6)
- Hardened Base login guard and softened Farcaster login errors outside MiniApp. (assets/wallet-ui.js V1.2.7)
- Improved MetaMask selection and account restore on load. (assets/wallet-ui.js V1.2.8)
- Reworked header login UI: removed admin tags, added login icon + dropdown with admin link only for owner. (assets/wallet-ui.css V1.2.0, assets/wallet-ui.js V1.3.0, index.html V1.4.4, card-minter.html V2.1.4, deck-minter.html V1.6.4, deck-builder.html V1.6.4, collection.html V1.5.4, game.html V1.7.6, generate-cardback.html V1.1.6, admin.html V1.0.2)
- Added admin cleanup tools and ERC-721 contract draft. (admin.html V1.0.3, assets/wallet-ui.js V1.3.1, contracts/TokenCard.sol V0.1.0, docs/admin.md V1.0.3)
- Fixed Ownable constructor for OpenZeppelin v5 deployment. (contracts/TokenCard.sol V0.1.1)
- Saved TokenCard contract address and added admin mint/burn test tools. (docs/decisions.md V1.0.4, admin.html V1.0.4, docs/admin.md V1.0.4)
- Added tokenURI template, last minted token display, and contract status panel to admin tests. (admin.html V1.0.5, docs/admin.md V1.0.5)
- Added admin wallet detection fixes and onchain mint panels for cards/decks. (admin.html V1.0.7, card-minter.html V2.1.6, deck-minter.html V1.6.5)
- Enabled auto onchain mint from card minter and improved admin wallet gating. (card-minter.html V2.1.7, admin.html V1.0.7)
- Added Playwright testing guidance for the agent. (docs/agent1.md V1.1.0, docs/agentroadmap2.md V1.1.0)
- Updated Playwright CLI invocation to use playwright-mcp binary. (docs/agent1.md V1.1.1, docs/agentroadmap2.md V1.1.1)
- Added agent roadmaps and agent summary docs. (docs/agentroadmap1.md V1.0.0, docs/agentroadmap2.md V1.0.0, docs/agentroadmap3.md V1.0.0, docs/agent1.md V1.0.0)

## 2026-02-07
- Enforced onchain-first card mint flow: card mint now requires successful Base Sepolia mint, then stores a local onchain cache entry and mirrors to Supabase best-effort for admin reporting. (card-minter.html V2.2.0)
- Enforced onchain-first deck save flow: deck save now triggers onchain mint, stores local onchain deck cache, and mirrors to Supabase best-effort. (deck-minter.html V1.7.0)
- Added onchain cache as primary source for collection rendering, with DB/local fallback only if onchain cache is empty. (collection.html V1.6.0)
- Added onchain cache as primary source for deck builder card pool, with DB/local fallback only if onchain cache is empty. (deck-builder.html V1.7.0)
- Extended admin tools with deck mint, deck token URI template helper, and separate deck contract deployment status indicator. (admin.html V1.1.0)
- Upgraded TokenCard contract draft with XP, level, metadata update hooks, and explicit lifecycle events for testnet iteration. (contracts/TokenCard.sol V0.2.0)
- Added TokenDeck ERC-721 contract draft for deck NFT mint/burn/URI update on Base Sepolia test loops. (contracts/TokenDeck.sol V0.1.0)
- Added shared onchain config bootstrap (`assets/onchain-config.js`) to centralize Base Sepolia chain + contract defaults for UI pages. (assets/onchain-config.js V1.0.0)
- Wired shared onchain config into card/deck minters and normalized chain guard to configured hex chainId. (card-minter.html V2.2.1, deck-minter.html V1.7.1)
- Extended admin with contract read tools for `nextTokenId`, `ownerOf(tokenId)`, and `tokenURI(tokenId)` plus config-driven default contract hydration. (admin.html V1.2.0)
- Enabled runtime contract override via `localStorage.token_onchain_config` to wire new deployments without code edits. (assets/onchain-config.js V1.1.0)
- Added Base Sepolia TokenDeck deployment runbook with constructor args and post-deploy wiring checks. (docs/tokendeck-deploy.md V1.0.0)
- Added Playwright smoke script for onchain pages (`index`, `card-minter`, `deck-minter`, `collection`, `deck-builder`, `admin`). (scripts/smoke-onchain.mjs V1.0.0)
- Added Remix assist script to generate deploy plans and persist deployed card/deck addresses into shared onchain config. (scripts/remix-assist.mjs V1.0.0, assets/onchain-config.js V1.1.0)
- Added Remix-agent integration guide and linked the workflow into agent rules. (docs/remix-agent-integration.md V1.0.0, docs/agent1.md V1.2.0)
- Saved deployed Base Sepolia TokenDeck contract address `0xc75170E7268A25CE759cEe019F1c6030F414a82d` in shared config and decisions tracking.
- Refactored deck minter to wallet-NFT-only crafting and automatic onchain deck mint (removed manual/local dual flow from UI). (deck-minter.html V1.8.0)

## 2026-02-08
- Added agent automation scripts for one-command bootstrap and full smoke testing. (`scripts/agent-bootstrap.sh` V1.0.0, `scripts/agent-test-full.sh` V1.0.0, `package.json` V1.1.0)
- Added Codespaces devcontainer config to auto-run bootstrap on environment creation. (`.devcontainer/devcontainer.json` V1.0.0)
- Added CI workflow to run Playwright onchain smoke checks on every push/PR involving `codex/agent`. (`.github/workflows/agent-ci.yml` V1.0.0)
- Upgraded agent runbook with mandatory full smoke gate and bootstrap commands. (`docs/agent1.md` V1.3.0)
